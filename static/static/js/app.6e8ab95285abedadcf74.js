webpackJsonp([1],{"5M97":function(t,n){},"GbA/":function(t,n){},NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("7+uW"),o={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var a=e("VU/8")({name:"App"},o,!1,function(t){e("5M97")},null,null).exports,s=e("/ocq"),r=e("Gu7T"),c=e.n(r),l=e("mtWM"),d=e.n(l);var h=[3400,1500],g=[2030,1400],u={name:"HelloWorld",data:function(){return{bgChoose:"竖向照片",bgImg:[{name:"竖向照片",url:"bgR.png"},{name:"横向照片",url:"bgL.png"}],canvas:null,ctx:null,msg:[],point:{name:[270,485],partyment:[186,853],date:[710,625],department:[320,760],departments:[450,895],live:[352,935],bug:[810,1680],honor:[352,1320],self:[352,1430],critic:{first:{name:[h[0],h[1]],content:[g[0],g[1]]},second:{name:[h[0],h[1]+200],content:[g[0]-100,g[1]+200]},third:{name:[h[0],h[1]+400],content:[g[0]-100,g[1]+400]},fourth:{name:[h[0],h[1]+600],content:[g[0]-100,g[1]+600]}}},nowMsg:{bgChoose:"竖向照片",cardbg:"bgR.png",name:"请选择",date:null,department:"",departments:[],award:null,bug:"",critic:{first:{name:"",content:"",contentArr:[]},second:{name:"",content:"",contentArr:[]},third:{name:"",content:"",contentArr:[]},fourth:{name:"",content:"",contentArr:[]}}}}},mounted:function(){this.getData(),this.initRender()},methods:{imgOutput:function(){var t=new Image;t.src=this.canvas.toDataURL("image/png"),console.log(t),document.getElementById("img").appendChild(t)},drawImg:function(){var t=this,n=new Image;n.src="/static/icon/"+this.nowMsg.name+".jpg",n.onload=function(){"bgR.png"===t.nowMsg.cardbg?t.ctx.drawImage(n,1890,160,750,1e3):t.ctx.drawImage(n,1900,190,1150,750),t.ctx.closePath()}},drawLive:function(){var t=this,n=function(t){for(var n=1*new Date(t),e=["NC Cloud 1903升级","NC Cloud 1811首发版","NC6.5升级","NCV6.33升级","NCV6.3升级"],i=null,o=[],a=["2019/3/29","2018/11/30","2015/12/28","2014/9/17","2013/9/13"].map(function(t,n){var e=t.replace(/\//g,"-");return 1*new Date(e)}),s=0;s<a.length&&!(n>a[s]);s++)i=s+1;for(var r=0;r<i;r++)o.push(e[r]);return o}(this.nowMsg.date),e=[],i="",o=[].concat(c()(this.point.live));console.log(o),n.push("等诸多产品大事记"),n.forEach(function(o,a){for(var s in o)t.ctx.measureText(i).width>1200&&(e.push(i),i=""),i+=o[s],console.log(i);a!==n.length-1&&a!==n.length-2&&(i+="、")}),e.push(i),console.log(e),e.forEach(function(n,e){console.log(n,o),o[1]+=90,t.drawText({text:n,point:o,textAlign:"left",color:"#88bf43"})})},drawAward:function(){for(var t=this.nowMsg.award&&this.nowMsg.award.honor,n=this.nowMsg.award&&this.nowMsg.award.self,e="",i="",o=0;o<t.length&&(e+=t[o]+"、",!(this.ctx.measureText(e).width>1e3));o++);for(var a=0;a<n.length;a++)i+=n[a]+"、";if(e.length){var s=e.slice(0,-1)+"等荣耀……";this.drawText({text:s,point:this.point.honor,textAlign:"left",color:"#48BED9"})}if(i.length){var r=i.slice(0,-1)+"等荣誉……";this.drawText({text:r,point:this.point.self,textAlign:"left",color:"#48BED9"})}},nameSelect:function(t){var n=this.msg;this.nowMsg.department=n[t][0],this.nowMsg.name=n[t][1],this.nowMsg.date=n[t][2],this.nowMsg.critic.first.name=n[t][3],this.nowMsg.critic.first.content=n[t][4],this.nowMsg.critic.second.name=n[t][5],this.nowMsg.critic.second.content=n[t][6],this.nowMsg.critic.third.name=n[t][7],this.nowMsg.critic.third.content=n[t][8],this.nowMsg.critic.fourth.name=n[t][9],this.nowMsg.critic.fourth.content=n[t][10],this.setBg()},drawCriti:function(){var t=this.point.critic,n=this.nowMsg.critic;this.drawText({text:"--"+n.first.name,point:t.first.name,textAlign:"right",fontSize:48,color:"#555555"}),this.drawText({text:"--"+n.second.name,point:t.second.name,textAlign:"right",fontSize:48,color:"#555555"}),this.drawText({text:"--"+n.third.name,point:t.third.name,textAlign:"right",fontSize:48,color:"#555555"}),this.drawText({text:"--"+n.fourth.name,point:t.fourth.name,textAlign:"right",fontSize:48,color:"#555555"}),this.dealCriti(n.first.content,t.first.content,!1),this.dealCriti(n.second.content,t.second.content,!0),this.dealCriti(n.third.content,t.third.content,!0),this.dealCriti(n.fourth.content,t.fourth.content,!0)},dealCriti:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"无评论",n=this,e=arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?1400:1300,o=t?t.split(""):[],a="",s=[],r=0;r<o.length;r++)this.ctx.measureText(a).width>i&&(s.push(a),a=""),a+=o[r];s.push(a),s.forEach(function(t,i){var o=[e[0],e[1]+100*i];n.drawText({text:t,point:o,textAlign:"left",fontSize:38,color:"#555"})})},drawDepartment:function(){this.drawText({text:this.nowMsg.department+"的一员",point:this.point.department,textAlign:"left"})},drawDays:function(){var t,n=(t=this.nowMsg.date,parseInt(365*Math.round((1*new Date-1*new Date(t))/864e5/365)));this.drawText({text:n,point:this.point.date})},draw:function(){this.drawText({text:this.nowMsg.name,point:this.point.name}),this.drawDays(),this.drawDepartment(),this.drawCriti(),this.drawLive(),this.drawImg(),this.getData(this.nowMsg.name)},drawText:function(t){var n=t.text,e=t.point,i=t.textAlign,o=void 0===i?"center":i,a=t.fontsize,s=void 0===a?55:a,r=t.color,c=void 0===r?"#F78C66":r;this.ctx.font=s+"px 微软雅黑",this.ctx.textAlign=o,this.ctx.textBaseline="bottom",this.ctx.fillStyle=c,this.ctx.fillText(n,e[0],e[1]),this.ctx.closePath()},bgSelect:function(t,n){this.nowMsg.bgChoose=this.bgImg[t].name,this.nowMsg.cardbg=this.bgImg[t].url,this.setBg(t)},initRender:function(){this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.setBg()},setBg:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(t>1||t<0)&&(t=0);var n=new Image;n.src="static/img/"+this.nowMsg.cardbg,n.onload=function(){this.ctx.drawImage(n,0,0,3508,2480),this.draw()}.bind(this)},drawBug:function(){if(this.nowMsg.bug.length<3)return this.ctx.fillStyle="#fff",void this.ctx.fillRect(180,1600,1600,100);this.drawText({text:this.nowMsg.bug,point:this.point.bug,textAlign:"left"})},drawDepartments:function(){var t=this.nowMsg.departments;if(t.length<1)return this.ctx.fillStyle="#fff",void this.ctx.fillRect(180,800,1600,100);for(var n="",e=t.length-1;e>=0&&(n+=0===e?t[e]:t[e]+"、",!(this.ctx.measureText(n).width>800));e--);var i=n.slice(0,-1);i+="等部门",this.drawText({text:i,point:this.point.departments,textAlign:"left"})},getData:function(t){var n=this;d.a.get("http://127.0.0.1:3000/honor",{params:{name:t}}).then(function(t){console.log(t.data)}),d.a.get("http://127.0.0.1:3000/bug",{params:{name:t}}).then(function(t){n.nowMsg.bug=t.data,n.drawBug()}),d.a.get("http://127.0.0.1:3000/mes").then(function(t){n.msg=t.data}),d.a.get("http://127.0.0.1:3000/awa",{params:{name:t}}).then(function(t){n.nowMsg.award=t.data,console.log(t.data),n.drawAward()}),d.a.get("http://127.0.0.1:3000/dep",{params:{name:t}}).then(function(t){var e=t.data;e.pop(),console.log(e),n.nowMsg.departments=e,n.drawDepartments()})},canvasCli:function(t){var n=this.canvas.getBoundingClientRect(),e=n.top,i=n.left;console.log(t.clientX-e+","+(t.clientY-i))}}},m={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"hello"},[e("header",[e("el-dropdown",{on:{command:t.bgSelect}},[e("span",{staticClass:"el-dropdown-link"},[t._v("\n        "+t._s(t.nowMsg.bgChoose)),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"0"}},[t._v("竖向照片")]),t._v(" "),e("el-dropdown-item",{attrs:{command:"1"}},[t._v("横向照片")])],1)],1),t._v(" "),e("el-dropdown",{on:{command:t.nameSelect}},[e("span",{staticClass:"el-dropdown-link"},[t._v("\n        "+t._s(t.nowMsg.name)),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.msg,function(n,i){return e("el-dropdown-item",{key:i,attrs:{command:i}},[t._v(t._s(n[1]))])}),1)],1),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.imgOutput}},[t._v("导出图片")])],1),t._v(" "),e("canvas",{attrs:{id:"canvas",width:"3508",height:"2480"},on:{click:t.canvasCli}}),t._v(" "),e("div",{attrs:{id:"img"}})])},staticRenderFns:[]};var w=e("VU/8")(u,m,!1,function(t){e("GbA/")},"data-v-516e49fe",null).exports;i.default.use(s.a);var f=new s.a({routes:[{path:"/",name:"HelloWorld",component:w}]}),p=e("zL8q"),v=e.n(p);e("tvR6");i.default.config.productionTip=!1,i.default.use(v.a),new i.default({el:"#app",router:f,components:{App:a},template:"<App/>"})},tvR6:function(t,n){}},["NHnr"]);
//# sourceMappingURL=app.6e8ab95285abedadcf74.js.map